(()=>{"use strict";var e={970:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SELECTOR=void 0;class o{}t.SELECTOR=o,o.HREF_ALL='a[href="#/"]',o.HREF_ACTIVE='a[href="#/active"]',o.HREF_COMPLETED='a[href="#/completed"]'},742:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;const n=o(384),a=o(85);t.Controller=function(){const e={addTodo:function(e){if(e instanceof KeyboardEvent&&13!=e.keyCode)return;let t=o.newTodo.value.trim();t&&(i(t,!1),o.newTodo.value="",u())},toggleAll:function(e){l.forEach((e=>{e.toggle.checked=t.toggleAll.checked})),u()},clearCompleted:function(e){let t=0;const o=l.length;for(let e=0;e<o;e++)l[t].toggle.checked?s(t):t++;u()},focusoutTodo:function(e){const t=r(e.target);t&&(t.update(),u())},delTodo:g,toggleTodo:function(){u()},keyupTodo:function(e){const t=r(e.target);t&&e instanceof KeyboardEvent&&(13==e.keyCode?(t.editor.value.trim()?t.update():g(e),u()):27==e.keyCode&&t.cancel())},editTodo:function(e){const t=r(e.target);t&&t.edit()}},t=(0,a.Main)(e),o=(0,a.TodoList)(e),d=(0,a.Footer)(e),l=Array();function c(e){const t=(0,n.getId)(e);let o=-1,a=l.length;for(;t&&a--;)if(l[a].id==t){o=a;break}return o}function r(e){const t=c(e);return t>-1?l[t]:null}function s(e){l[e].element.remove(),l.splice(e,1)}function i(e,t){l.push((0,a.TodoItem)(o.element,e,t))}function u(){const e={};for(const t in l){const o=l[t];e[t]={checked:o.toggle.checked,name:o.label.textContent}}localStorage.setItem("todos_typescript",JSON.stringify(e)),f()}function f(){const e=l.length;let o=0;l.forEach((e=>{e.toggle.checked||o++})),l.forEach((e=>e.render())),t.render(o,e),d.render(o,e)}function g(e){const t=c(e.target);t>-1&&(s(t),u())}(0,n.on)(document,"DOMContentLoaded",(e=>function(){const e=localStorage.getItem("todos_typescript");if(e){const t=JSON.parse(e);for(const e in t)t.hasOwnProperty(e)&&i(t[e].name,t[e].checked)}f()}())),(0,n.on)(window,"hashchange",(e=>f()))}},384:(e,t)=>{function o(e,t=null){let o;return o="string"==typeof e?(t||document).querySelectorAll(e):e,{get:()=>o instanceof Element?o:0==o.length?null:o[0],getAll:e=>o instanceof Element?o:0==o.length?null:e?o[e]:null,hasClass(e){if(o instanceof Element)return n(o,e);if(0==o.length)return!1;let t=!0;return o.forEach((o=>{t=n(o,e)&&t})),t},removeClass(e){return o instanceof Element?(a(o,e),this):(0==o.length||o.forEach((t=>{a(t,e)})),this)},addClass(e){return o instanceof Element?(d(o,e),this):(0==o.length||o.forEach((t=>{d(t,e)})),this)},toggleClass(e){return o instanceof Element?(l(o,e),this):(0==o.length||o.forEach((t=>{l(t,e)})),this)}}}function n(e,t){if(!e)return!1;let o=!1;const n=t.split(" ");for(let t=0;t<n.length&&(o=e.classList?e.classList.contains(n[t]):new RegExp("\\b"+n[t]+"\\b").test(e.className),o);t++);return o}function a(e,t){e&&(e.classList?t.split(" ").forEach((t=>e.classList.remove(t))):e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),""))}function d(e,t){e&&(e.classList?t.split(" ").forEach((t=>e.classList.add(t))):o(e).hasClass(t)||(e.className+=" "+t))}function l(e,t){const n=o(e).getAll();n&&(o(n).hasClass(t)?o(n).removeClass(t):o(n).addClass(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.getId=t.uuid=t.dot=t.Factory=t.delegate=t.on=t.$=void 0,t.$=o,t.on=function(e,t,o,n=!1){e.addEventListener(t,o,n)},t.delegate=function(e,t,o,n,a=!1){e.addEventListener(o,(o=>{const a=e.querySelectorAll(t);for(let e=0;e<a.length;e++)if(a[e]===o.target){n.call(o.target,o);break}}),a)};class c{static createElement(e,t,o=""){const n=document.createElement(e);return o&&(n.className=o),t&&t.appendChild(n),n}static div(e,t){return c.createElement("div",e,t)}static button(e,t){return c.createElement("button",e,t)}static editor(e,t){return c.createElement("input",e,t)}static li(e,t){const o=c.createElement("li",e);return o.dataset.id=t,o}static check(e,t,o=!1){const n=c.createElement("input",e,t);return n.setAttribute("type","checkbox"),n.checked=o,n}static label(e,t,o=""){const n=c.createElement("label",e,t);return o&&(n.textContent=o),n}}t.Factory=c,t.dot=function(e){return"."+e};const r=new Array;for(var s=0;s<256;s++)r[s]=(s<16?"0":"")+s.toString(16);t.uuid=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,o=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return r[255&e]+r[e>>8&255]+r[e>>16&255]+r[e>>24&255]+"-"+r[255&t]+r[t>>8&255]+"-"+r[t>>16&15|64]+r[t>>24&255]+"-"+r[63&o|128]+r[o>>8&255]+"-"+r[o>>16&255]+r[o>>24&255]+r[255&n]+r[n>>8&255]+r[n>>16&255]+r[n>>24&255]},t.getId=function(e){let t;return e instanceof HTMLElement&&e.parentNode&&(t=e.parentNode.dataset.id,!t&&e.parentNode.parentNode&&(t=e.parentNode.parentNode.dataset.id)),t}},85:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=t.Main=t.TodoList=t.TodoItem=void 0;const n=o(970),a=o(384);t.TodoItem=function(e,t,o){const n=(0,a.uuid)(),d=a.Factory.li(e,n),l=a.Factory.div(d,"view"),c=a.Factory.check(l,"toggle",o),r=a.Factory.label(l,"",t),s=(a.Factory.button(l,"destroy"),a.Factory.editor(d,"edit"));return{id:n,element:d,toggle:c,label:r,editor:s,update:function(){s.value.trim()&&(r.textContent=s.value.trim(),(0,a.$)(d).removeClass("editing"))},edit:function(){s.value="",r.textContent&&(s.value=r.textContent),(0,a.$)(d).addClass("editing"),s.focus()},cancel:function(){s.value="",(0,a.$)(d).removeClass("editing")},render:function(){switch(c.checked?(0,a.$)(d).addClass("completed"):(0,a.$)(d).removeClass("completed"),window.location.hash){case"#/active":c.checked?(0,a.$)(d).addClass("hidden"):(0,a.$)(d).removeClass("hidden");break;case"#/completed":c.checked?(0,a.$)(d).removeClass("hidden"):(0,a.$)(d).addClass("hidden");break;default:(0,a.$)(d).removeClass("hidden")}}}},t.TodoList=function(e){const t=(0,a.$)((0,a.dot)("todo-list")).get(),o=(0,a.$)((0,a.dot)("new-todo")).get();return(0,a.on)(o,"keyup",e.addTodo),(0,a.on)(o,"focusout",e.addTodo),(0,a.delegate)(t,(0,a.dot)("edit"),"focusout",e.focusoutTodo),(0,a.delegate)(t,(0,a.dot)("destroy"),"click",e.delTodo),(0,a.delegate)(t,(0,a.dot)("toggle"),"change",e.toggleTodo),(0,a.delegate)(t,(0,a.dot)("edit"),"keyup",e.keyupTodo),(0,a.delegate)(t,"label","dblclick",e.editTodo),{element:t,newTodo:o}},t.Main=function(e){const t=(0,a.$)((0,a.dot)("main")).get(),o=(0,a.$)((0,a.dot)("toggle-all")).get();return(0,a.on)(o,"change",e.toggleAll),{toggleAll:o,render:function(e,n){o.checked=n>0&&0==e,n>0?(0,a.$)(t).removeClass("hidden"):(0,a.$)(t).addClass("hidden")}}},t.Footer=function(e){const t=(0,a.$)((0,a.dot)("footer")).get(),o=(0,a.$)((0,a.dot)("todo-count")).get(),d=(0,a.$)((0,a.dot)("clear-completed")).get(),l=(0,a.$)(n.SELECTOR.HREF_ALL).get(),c=(0,a.$)(n.SELECTOR.HREF_ACTIVE).get(),r=(0,a.$)(n.SELECTOR.HREF_COMPLETED).get();return(0,a.on)(d,"click",e.clearCompleted),{render:function(e,n){switch(o.innerHTML=1==e?`<strong>${e}</strong> item left`:`<strong>${e}</strong> items left`,(0,a.$)("a").removeClass("selected"),window.location.hash){case"#/active":(0,a.$)(c).addClass("selected");break;case"#/completed":(0,a.$)(r).addClass("selected");break;default:(0,a.$)(l).addClass("selected")}n-e>0?(0,a.$)(d).removeClass("hidden"):(0,a.$)(d).addClass("hidden"),n>0?(0,a.$)(t).removeClass("hidden"):(0,a.$)(t).addClass("hidden")}}}}},t={};(0,function o(n){var a=t[n];if(void 0!==a)return a.exports;var d=t[n]={exports:{}};return e[n](d,d.exports,o),d.exports}(742).Controller)()})();